exec git init
exec hookflow install
exec git config user.email "you@example.com"
exec git config user.name "Your Name"
exec git add -A
exec hookflow run -f all
stdout '^a.txt b.txt dir/a.txt dir/b.txt hookflow.yml\s*$'
exec hookflow run -f oneline
stdout '^hookflow.yml\s*$'
exec hookflow run -f array
stdout '^dir/a.txt dir/b.txt\s*$'
exec hookflow run -f nested
stdout '^hookflow.yml\s+dir/b.txt hookflow.yml\s+b.txt dir/b.txt hookflow.yml\s+b.txt dir/b.txt\s*$'

-- hookflow.yml --
output:
  - execution_out

all:
  commands:
    echo:
      run: echo {staged_files}

oneline:
  commands:
    echo:
      run: echo {staged_files}
      exclude: '*.txt'

array:
  jobs:
    - run: echo {staged_files}
      exclude:
        - a.txt
        - b.txt
        - '*.yml'

nested:
  jobs:
    - exclude:
        - '*.txt'
      run: echo {staged_files}
    - exclude:
        - a.txt
        - dir/a.txt
      group:
        jobs:
          - exclude:
              - b.txt
            run: echo {staged_files}
          - group:
              jobs:
                - run: echo {staged_files}
          - group:
              jobs:
                - exclude:
                    - '*.yml'
                  run: echo {staged_files}
-- a.txt --
a

-- b.txt --
b

-- dir/a.txt --
dir-a

-- dir/b.txt --
dir-b


