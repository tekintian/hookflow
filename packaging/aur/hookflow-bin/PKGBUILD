# Maintainer: Hookflow <tekintian@gmail.com>

pkgname=hookflow-bin
pkgdesc="Git hooks manager"
pkgver=1.0.0
pkgrel=1
arch=('x86_64' 'aarch64')
url="https://github.com/tekintian/hookflow"
license=('MIT')
depends=()
makedepends=()
provides=('hookflow')
conflicts=('hookflow')
source_x86_64=("https://github.com/tekintian/hookflow/releases/download/v${pkgver}/hookflow_${pkgver}_Linux_x86_64.gz")
source_aarch64=("https://github.com/tekintian/hookflow/releases/download/v${pkgver}/hookflow_${pkgver}_Linux_aarch64.gz")
sha256sums_x86_64=('{{ sha256sum_linux_x86_64 }}')
sha256sums_aarch64=('{{ sha256sum_linux_aarch64 }}')

build() {
	cd "${srcdir}"

	mv "hookflow_${pkgver}_Linux_${CARCH}" hookflow
	chmod +x hookflow

	./hookflow completion zsh >hookflow.zsh
	./hookflow completion fish >hookflow.fish
	./hookflow completion bash >hookflow.bash
}

package() {
	cd "${srcdir}"

	# Install hookflow
	install -D -m0755 hookflow \
		"${pkgdir}/usr/bin/hookflow"

	# Install completions
	install -Dm644 hookflow.zsh "${pkgdir}/usr/share/zsh/site-functions/_hookflow"
	install -Dm644 hookflow.fish "${pkgdir}/usr/share/fish/completions/hookflow.fish"
	install -Dm644 hookflow.bash "${pkgdir}/usr/share/bash-completion/completions/hookflow"
}
